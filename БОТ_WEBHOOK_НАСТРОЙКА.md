# Настройка webhook для бота (приветствие + кнопка «Старт»)

Чтобы бот отвечал на сообщения, Telegram должен отправлять обновления на ваш сервер. Для этого нужно **один раз** установить webhook.

## Что уже сделано в коде

- **`api/telegram-webhook.ts`** — принимает обновления от Telegram.
- При команде `/start` или нажатии кнопки «Старт» / «Начать» бот отправляет приветствие и показывает внизу большую кнопку **Старт** (её можно нажимать снова вместо ввода /start).

## Шаг 1. Задеплойте проект

Убедитесь, что последние изменения залиты на Vercel (или ваш хостинг) и что в настройках проекта задана переменная **`TELEGRAM_BOT_TOKEN`** (тот же токен, что и для `/api/send`).

## Шаг 2. Установите webhook в Telegram

Подставьте свой домен и токен бота и выполните **один раз** в браузере или через `curl`:

```
https://api.telegram.org/bot<ВАШ_TELEGRAM_BOT_TOKEN>/setWebhook?url=https://<ВАШ_ДОМЕН>/api/telegram-webhook
```

**Пример для Vercel:**
```
https://api.telegram.org/bot123456:ABC-DEF.../setWebhook?url=https://travelplus-miniapp.vercel.app/api/telegram-webhook
```

Ответ должен быть вроде: `{"ok":true,"result":true,"description":"Webhook was set"}`.

## Шаг 3. Проверка

1. Откройте бота в Telegram.
2. Нажмите **Start** (внизу в интерфейсе Telegram) или отправьте `/start`.
3. Должно прийти приветственное сообщение и под ним большая кнопка **Старт**.
4. Нажатие на эту кнопку снова покажет приветствие (вводить /start не нужно).

## Отмена webhook

Если нужно вернуть бота к прежнему поведению (без нашего сервера):

```
https://api.telegram.org/bot<ТОКЕН>/deleteWebhook
```

После этого бот перестанет получать обновления на наш endpoint.
